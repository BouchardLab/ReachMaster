

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ReachMaster User Interface &mdash; ReachMaster alpha documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Image Preprocessing" href="../image_preprocessing/image_preprocessing.html" />
    <link rel="prev" title="Software" href="../software.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> ReachMaster
          

          
            
            <img src="../../_static/splinter.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/hardware.html">Hardware</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../software.html">Software</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">ReachMaster User Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#root-application-window">Root Application Window</a></li>
<li class="toctree-l3"><a class="reference internal" href="#camera-settings">Camera Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#experiment-settings">Experiment Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#robot-settings">Robot Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#protocols">Protocols</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-reachmaster.interfaces.camera_interface">Camera Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-reachmaster.interfaces.experiment_interface">Experiment Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-reachmaster.interfaces.robot_interface">Robot Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-reachmaster.config">Configuration Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../image_preprocessing/image_preprocessing.html">Image Preprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rig_controllers/rig_controllers.html">Rig Controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../robot_calibration/robot_calibration.html">Robot Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../archived/archived.html">Archived</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ReachMaster</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../software.html">Software</a> &raquo;</li>
        
      <li>ReachMaster User Interface</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/software/reach_master/reach_master.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-reach_master">
<span id="reachmaster-user-interface"></span><h1>ReachMaster User Interface<a class="headerlink" href="#module-reach_master" title="Permalink to this headline">¶</a></h1>
<p>The primary graphical user interface used to
control and run experiments.</p>
<p class="rubric">Example</p>
<p>From command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python reach_master.py
</pre></div>
</div>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>Create executable</p></li>
</ul>
</div>
<div class="section" id="root-application-window">
<h2>Root Application Window<a class="headerlink" href="#root-application-window" title="Permalink to this headline">¶</a></h2>
<img alt="../../_images/root_application.png" class="align-center" src="../../_images/root_application.png" />
<span class="target" id="module-reachmaster.application"></span><p>The root application window provides functionality for selecting a
data output directory, a configuration file, connecting to the
experiment and robot controllers, accessing the settings windows,
basic rig control, as well as selecting and running protocols.</p>
<p class="rubric">Examples</p>
<p>From command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python application.py
</pre></div>
</div>
<p>From python:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">reachmaster.application</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rm</span> <span class="o">=</span> <span class="n">application</span><span class="o">.</span><span class="n">ReachMaster</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rm</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>Automated unit tests</p></li>
<li><p>PEP 8</p></li>
</ul>
</div>
<dl class="class">
<dt id="reachmaster.application.ReachMaster">
<em class="property">class </em><code class="sig-prename descclassname">reachmaster.application.</code><code class="sig-name descname">ReachMaster</code><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster" title="Permalink to this definition">¶</a></dt>
<dd><p>The primary class for the root ReachMaster application.</p>
<p>Configures and provides callback methods for the root application
window. The <cite>run()</cite> method detects events during normal operation
and the <cite>on_quit()</cite> method is called prior to application
destruction.</p>
<dl class="attribute">
<dt id="reachmaster.application.ReachMaster.window">
<code class="sig-name descname">window</code><a class="headerlink" href="#reachmaster.application.ReachMaster.window" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter object that constructs the root application window.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.application.ReachMaster.config">
<code class="sig-name descname">config</code><a class="headerlink" href="#reachmaster.application.ReachMaster.config" title="Permalink to this definition">¶</a></dt>
<dd><p>The current configuration settings for the application.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.application.ReachMaster.data_dir">
<code class="sig-name descname">data_dir</code><a class="headerlink" href="#reachmaster.application.ReachMaster.data_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected data
output directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.application.ReachMaster.config_file">
<code class="sig-name descname">config_file</code><a class="headerlink" href="#reachmaster.application.ReachMaster.config_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected
configuration file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.application.ReachMaster.port_list">
<code class="sig-name descname">port_list</code><a class="headerlink" href="#reachmaster.application.ReachMaster.port_list" title="Permalink to this definition">¶</a></dt>
<dd><p>List of serial port names with connected devices.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.application.ReachMaster.exp_control_port">
<code class="sig-name descname">exp_control_port</code><a class="headerlink" href="#reachmaster.application.ReachMaster.exp_control_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected port from
the port list for the experiment microcontroller.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.application.ReachMaster.rob_control_port">
<code class="sig-name descname">rob_control_port</code><a class="headerlink" href="#reachmaster.application.ReachMaster.rob_control_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected port from
the port list for the robot microcontroller.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>insstance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.application.ReachMaster.protocol_list">
<code class="sig-name descname">protocol_list</code><a class="headerlink" href="#reachmaster.application.ReachMaster.protocol_list" title="Permalink to this definition">¶</a></dt>
<dd><p>List of protocol options.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.application.ReachMaster.protocol">
<code class="sig-name descname">protocol</code><a class="headerlink" href="#reachmaster.application.ReachMaster.protocol" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.application.ReachMaster.running">
<code class="sig-name descname">running</code><a class="headerlink" href="#reachmaster.application.ReachMaster.running" title="Permalink to this definition">¶</a></dt>
<dd><p>True if the root application window has not been destroyed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.application.ReachMaster.exp_connected">
<code class="sig-name descname">exp_connected</code><a class="headerlink" href="#reachmaster.application.ReachMaster.exp_connected" title="Permalink to this definition">¶</a></dt>
<dd><p>True if interface to the experiment microcontroller is active.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.application.ReachMaster.rob_connected">
<code class="sig-name descname">rob_connected</code><a class="headerlink" href="#reachmaster.application.ReachMaster.rob_connected" title="Permalink to this definition">¶</a></dt>
<dd><p>True if interface to the robot microcontroller is active.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.application.ReachMaster.protocol_running">
<code class="sig-name descname">protocol_running</code><a class="headerlink" href="#reachmaster.application.ReachMaster.protocol_running" title="Permalink to this definition">¶</a></dt>
<dd><p>True while an experiment protocol is being executed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.application.ReachMaster.child">
<code class="sig-name descname">child</code><a class="headerlink" href="#reachmaster.application.ReachMaster.child" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter Toplevel object that constructs child window selected
by the user from the root application window. Defaults to None
when child window is closed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>NoneType or instance</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.cam_settings_callback">
<code class="sig-name descname">cam_settings_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.cam_settings_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.cam_settings_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens the camera settings window.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.config_file_browse_callback">
<code class="sig-name descname">config_file_browse_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.config_file_browse_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.config_file_browse_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows user to load a previously saved configuration file.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.data_dir_browse_callback">
<code class="sig-name descname">data_dir_browse_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.data_dir_browse_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.data_dir_browse_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows user to set the data output directory.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.deliver_water_callback">
<code class="sig-name descname">deliver_water_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.deliver_water_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.deliver_water_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens the reward solenoid for the reward duration set
in experiment settings.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.exp_connect_callback">
<code class="sig-name descname">exp_connect_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.exp_connect_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.exp_connect_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Connects to the experiment microcontroller located at the
user selected port.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.exp_disconnect_callback">
<code class="sig-name descname">exp_disconnect_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.exp_disconnect_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.exp_disconnect_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Disconncects from the experiment microcontroller.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.exp_settings_callback">
<code class="sig-name descname">exp_settings_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.exp_settings_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.exp_settings_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens the experiment settings window.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.flush_water_callback">
<code class="sig-name descname">flush_water_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.flush_water_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.flush_water_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens the reward solenoid for the flush duration set in
experiment settings.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.move_rob_callback">
<code class="sig-name descname">move_rob_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.move_rob_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.move_rob_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Commands the robot to move to the next position in
its currently loaded command sequence.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.on_quit">
<code class="sig-name descname">on_quit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.on_quit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.on_quit" title="Permalink to this definition">¶</a></dt>
<dd><p>Called prior to destruction of the ReachMaster application.</p>
<p>Prevents destruction if any child windows are open. Asks user
to save the configuration file to the data directory. Stops
all active interfaces.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.rob_connect_callback">
<code class="sig-name descname">rob_connect_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.rob_connect_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.rob_connect_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Connects to the robot microcontroller located at the user
selected port.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.rob_disconnect_callback">
<code class="sig-name descname">rob_disconnect_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.rob_disconnect_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.rob_disconnect_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Disconncects from the robot microcontroller.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.rob_settings_callback">
<code class="sig-name descname">rob_settings_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.rob_settings_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.rob_settings_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens the robot settings window.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.run" title="Permalink to this definition">¶</a></dt>
<dd><p>The application main loop.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.run_protocol_callback">
<code class="sig-name descname">run_protocol_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.run_protocol_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.run_protocol_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiates the user-selected experimental protocol.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.toggle_led_callback">
<code class="sig-name descname">toggle_led_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.toggle_led_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.toggle_led_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Toggles the LED located on the robot handle.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.application.ReachMaster.toggle_lights_callback">
<code class="sig-name descname">toggle_lights_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/application.html#ReachMaster.toggle_lights_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.application.ReachMaster.toggle_lights_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Toggles the neopixel lights.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="camera-settings">
<h2>Camera Settings<a class="headerlink" href="#camera-settings" title="Permalink to this headline">¶</a></h2>
<img alt="../../_images/camera_settings.png" class="align-center" src="../../_images/camera_settings.png" />
<span class="target" id="module-reachmaster.settings.camera_settings"></span><p>The camera settings window is opened as a child of the
ReachMaster root application. It provides functionality for
specifying the number of cameras, setting their intrinsic
parameters (e.g., exposure, gain, triggers, etc.), and data
output parameters (e.g., cropping, pixel resolution, etc.). It
provides functions to capture images and record videos which can
be useful for post-hoc camera calibration. It also provides
functions for adding, removing and saving pixels-of-interest
which are used by the experiment protocols for reach detection.</p>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>GPU-accelerated video encoding</p></li>
<li><p>Remove fps setting?</p></li>
<li><p>Automate unit tests</p></li>
<li><p>PEP 8</p></li>
</ul>
</div>
<dl class="class">
<dt id="reachmaster.settings.camera_settings.CameraSettings">
<em class="property">class </em><code class="sig-prename descclassname">reachmaster.settings.camera_settings.</code><code class="sig-name descname">CameraSettings</code><span class="sig-paren">(</span><em class="sig-param">parent</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/camera_settings.html#CameraSettings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>The primary class for the camera settings window.</p>
<p>Configures and provides window callback methods. Also provides
methods to stream/record video and capture images that can be
used for post hoc analyses (e.g., camera calibration). The
<cite>on_quit()</cite> method is called prior to application destruction.</p>
<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.config">
<code class="sig-name descname">config</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.config" title="Permalink to this definition">¶</a></dt>
<dd><p>The current configuration settings for the application</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.output_params">
<code class="sig-name descname">output_params</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.output_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Video output parameters for WriteGear</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.exp_controller">
<code class="sig-name descname">exp_controller</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.exp_controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Serial interface to the experiment microcontroller</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.exp_connected">
<code class="sig-name descname">exp_connected</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.exp_connected" title="Permalink to this definition">¶</a></dt>
<dd><p>True if the experiment interface is active</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.num_cams">
<code class="sig-name descname">num_cams</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.num_cams" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected number
of cameras</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.fps">
<code class="sig-name descname">fps</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.fps" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected frames
per second</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.exposure">
<code class="sig-name descname">exposure</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.exposure" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected camera
exposure</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.gain">
<code class="sig-name descname">gain</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.gain" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected camera
gain.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.gpi_mode">
<code class="sig-name descname">gpi_mode</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.gpi_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the camera input mode.
Currently, this is selected by the configuration file and
not the user as it is assumed all camera interfaces will
trigger images with the same method.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.trigger_source">
<code class="sig-name descname">trigger_source</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.trigger_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected camera
trigger source. Defers to the configuration file. Do not
change unless you know what you are doing.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.gpo_mode">
<code class="sig-name descname">gpo_mode</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.gpo_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected camera
sync output mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.buffer_dur">
<code class="sig-name descname">buffer_dur</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.buffer_dur" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected duration
that should be used by protocols for buffering images in
RAM when real-time encoding is not used.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.img_width">
<code class="sig-name descname">img_width</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.img_width" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected image
width in pixels. Must be less than your camera’s maximum
allowable image width and divisible by it’s width increment
value. See your camera’s manual for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.img_height">
<code class="sig-name descname">img_height</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.img_height" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected image
height in pixels. Must be less than your camera’s maximum
allowable image width and divisible by it’s width increment
value. See your camera’s manual for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.offset_x">
<code class="sig-name descname">offset_x</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.offset_x" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected image
horizontal offset in pixels. Must be less than your camera’s
maximum allowable image width minus the selected img_width.
See your camera’s manual for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.offset_y">
<code class="sig-name descname">offset_y</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.offset_y" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected image
vertical offset in pixels. Must be less than your camera’s
maximum allowable image width minus the selected img_height.
See your camera’s manual for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.downsampling">
<code class="sig-name descname">downsampling</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.downsampling" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected image
downsampling. Can be ‘XI_1x1’ (full resolution) or ‘XI_2x2’
(1/4 resolution). The latter can only be used when no cropping
or offsets are applied.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.poi_threshold">
<code class="sig-name descname">poi_threshold</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.poi_threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected
pixel-of-interest (poi) threshold (standard deviations) used
for reach detection.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.streaming">
<code class="sig-name descname">streaming</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.streaming" title="Permalink to this definition">¶</a></dt>
<dd><p>True if camera interface is acquiring and displaying images.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.cams_connected">
<code class="sig-name descname">cams_connected</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.cams_connected" title="Permalink to this definition">¶</a></dt>
<dd><p>True if camera interface is active.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.draw_saved">
<code class="sig-name descname">draw_saved</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.draw_saved" title="Permalink to this definition">¶</a></dt>
<dd><p>True if saved poi’s should be displayed while streaming.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.add_pois">
<code class="sig-name descname">add_pois</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.add_pois" title="Permalink to this definition">¶</a></dt>
<dd><p>True if clicking on images should add new poi’s during
streaming.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.remove_pois">
<code class="sig-name descname">remove_pois</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.remove_pois" title="Permalink to this definition">¶</a></dt>
<dd><p>True if clicking on images should remove added or saved poi’s
during streaming.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.added_pois">
<code class="sig-name descname">added_pois</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.added_pois" title="Permalink to this definition">¶</a></dt>
<dd><p>A nested list of added poi coordinates for each camera.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.saved_pois">
<code class="sig-name descname">saved_pois</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.saved_pois" title="Permalink to this definition">¶</a></dt>
<dd><p>A nested list of saved poi coordinates for each camera.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.capture">
<code class="sig-name descname">capture</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.capture" title="Permalink to this definition">¶</a></dt>
<dd><p>True if image should be saved to png while streaming.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.record">
<code class="sig-name descname">record</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.record" title="Permalink to this definition">¶</a></dt>
<dd><p>True while recording video.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.camera_settings.CameraSettings.img_num">
<code class="sig-name descname">img_num</code><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.img_num" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts captured images</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.camera_settings.CameraSettings.add_pois_callback">
<code class="sig-name descname">add_pois_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/camera_settings.html#CameraSettings.add_pois_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.add_pois_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows the user to add new pixels-of-interest by clicking
the desired pixel using the cursor. Unsaved added pixels are
displayed in red.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.camera_settings.CameraSettings.capture_image_callback">
<code class="sig-name descname">capture_image_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/camera_settings.html#CameraSettings.capture_image_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.capture_image_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows the user to capture an image while streaming. The image
is saved to the <cite>calibration images</cite> folder in the data output
directory.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.camera_settings.CameraSettings.load_pois_callback">
<code class="sig-name descname">load_pois_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/camera_settings.html#CameraSettings.load_pois_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.load_pois_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads previously saved pixels-of-interest and displays them
over the streaming images in green.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.camera_settings.CameraSettings.on_quit">
<code class="sig-name descname">on_quit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/camera_settings.html#CameraSettings.on_quit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.on_quit" title="Permalink to this definition">¶</a></dt>
<dd><p>Called prior to destruction of the camera settings window.</p>
<p>Prior to destruction, the configuration file must be updated
to reflect the change in settings, and any active interfaces
must be closed.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.camera_settings.CameraSettings.remove_pois_callback">
<code class="sig-name descname">remove_pois_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/camera_settings.html#CameraSettings.remove_pois_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.remove_pois_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows the user to removed either saved or unsaved
pixels-of-interest. However, the user must save all added
pixels in order for the changes to be reflected in the
configuration file.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.camera_settings.CameraSettings.save_pois_callback">
<code class="sig-name descname">save_pois_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/camera_settings.html#CameraSettings.save_pois_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.save_pois_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves all added and/or removed pixel-of-interest to the
configuration file.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.camera_settings.CameraSettings.start_rec_callback">
<code class="sig-name descname">start_rec_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/camera_settings.html#CameraSettings.start_rec_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.start_rec_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows the user to record a video which is saved to the <cite>calibration
videos</cite> folder of the data output directory.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.camera_settings.CameraSettings.start_stream_callback">
<code class="sig-name descname">start_stream_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/camera_settings.html#CameraSettings.start_stream_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.start_stream_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Begins triggering and displaying camera images to the screen.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.camera_settings.CameraSettings.stop_rec_callback">
<code class="sig-name descname">stop_rec_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/camera_settings.html#CameraSettings.stop_rec_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.stop_rec_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops a video recording.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.camera_settings.CameraSettings.stop_stream_callback">
<code class="sig-name descname">stop_stream_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/camera_settings.html#CameraSettings.stop_stream_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.stop_stream_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops triggering and displaying new images.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.camera_settings.CameraSettings.toggle_lights_callback">
<code class="sig-name descname">toggle_lights_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/camera_settings.html#CameraSettings.toggle_lights_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.camera_settings.CameraSettings.toggle_lights_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows the user to toggle the neopixel lights while streaming or
recording a video.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="experiment-settings">
<h2>Experiment Settings<a class="headerlink" href="#experiment-settings" title="Permalink to this headline">¶</a></h2>
<img alt="../../_images/experiment_settings.png" class="align-center" src="../../_images/experiment_settings.png" />
<span class="target" id="module-reachmaster.settings.experiment_settings"></span><p>The experiment settings window is opened as a child of the
ReachMaster root application. It allows the user to set any
experiment parameters located on the experiment microcontroller
(e.g., number/size of rewards, trial delays, etc.).</p>
<div class="admonition-todo admonition" id="id4">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>Move protocol type options here?</p></li>
<li><p>Automate unit tests</p></li>
<li><p>PEP 8</p></li>
</ul>
</div>
<dl class="class">
<dt id="reachmaster.settings.experiment_settings.ExperimentSettings">
<em class="property">class </em><code class="sig-prename descclassname">reachmaster.settings.experiment_settings.</code><code class="sig-name descname">ExperimentSettings</code><span class="sig-paren">(</span><em class="sig-param">parent</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/experiment_settings.html#ExperimentSettings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.experiment_settings.ExperimentSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>The primary class for the camera settings window.</p>
<dl class="attribute">
<dt id="reachmaster.settings.experiment_settings.ExperimentSettings.config">
<code class="sig-name descname">config</code><a class="headerlink" href="#reachmaster.settings.experiment_settings.ExperimentSettings.config" title="Permalink to this definition">¶</a></dt>
<dd><p>The current configuration settings for the application</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.experiment_settings.ExperimentSettings.lights_on_dur">
<code class="sig-name descname">lights_on_dur</code><a class="headerlink" href="#reachmaster.settings.experiment_settings.ExperimentSettings.lights_on_dur" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected duration
(ms) lights should remain on during a trial when <cite>protocol
type</cite> is ‘TRIALS’. If a reach is not detected in under this
duration, the lights will turn off until the next trial is
intitiated.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.experiment_settings.ExperimentSettings.lights_off_dur">
<code class="sig-name descname">lights_off_dur</code><a class="headerlink" href="#reachmaster.settings.experiment_settings.ExperimentSettings.lights_off_dur" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected duration
(ms) lights should remain off between trials when <cite>prtocol
type</cite> is ‘TRIALS’.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.experiment_settings.ExperimentSettings.reward_win_dur">
<code class="sig-name descname">reward_win_dur</code><a class="headerlink" href="#reachmaster.settings.experiment_settings.ExperimentSettings.reward_win_dur" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected duration
(ms) for which rewards rewards are delivered once the
handle is successfully pulled into the reward zone.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.experiment_settings.ExperimentSettings.max_rewards">
<code class="sig-name descname">max_rewards</code><a class="headerlink" href="#reachmaster.settings.experiment_settings.ExperimentSettings.max_rewards" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected maximum
number of rewards (int) delivered for a successful reach.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.experiment_settings.ExperimentSettings.solenoid_open_dur">
<code class="sig-name descname">solenoid_open_dur</code><a class="headerlink" href="#reachmaster.settings.experiment_settings.ExperimentSettings.solenoid_open_dur" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected solenoid
open duration (ms) which sets the individual reward size.
Solenoid calibration must be performed to get the mapping
from duration (ms) to volulme (mL).</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.experiment_settings.ExperimentSettings.solenoid_bounce_dur">
<code class="sig-name descname">solenoid_bounce_dur</code><a class="headerlink" href="#reachmaster.settings.experiment_settings.ExperimentSettings.solenoid_bounce_dur" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected minimum
duration (ms) the solenoid should remain closed between
reward deliveries. Note the redundancy with <cite>reward_win_dur</cite>
and <cite>max_rewards</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.experiment_settings.ExperimentSettings.flush_dur">
<code class="sig-name descname">flush_dur</code><a class="headerlink" href="#reachmaster.settings.experiment_settings.ExperimentSettings.flush_dur" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected duration
(ms) the solenoid should remain open while flushing the
lines.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.experiment_settings.ExperimentSettings.reach_delay">
<code class="sig-name descname">reach_delay</code><a class="headerlink" href="#reachmaster.settings.experiment_settings.ExperimentSettings.reach_delay" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected minimum
duration animals are required to wait before attempting a
reach after a trial is initiated when <cite>protocol type</cite> is
‘TRIALS’. Once the lights turn on, if a reach is attempted
before the end of the delay, the trial is haulted and the
lights are turned off. This enforces a timeout period to
discourage animals from performing reaches between trials.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.experiment_settings.ExperimentSettings.on_quit">
<code class="sig-name descname">on_quit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/experiment_settings.html#ExperimentSettings.on_quit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.experiment_settings.ExperimentSettings.on_quit" title="Permalink to this definition">¶</a></dt>
<dd><p>Called prior to destruction of the experiment settings window.</p>
<p>Prior to destruction, the configuration file must be updated
to reflect the change in settings.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="robot-settings">
<h2>Robot Settings<a class="headerlink" href="#robot-settings" title="Permalink to this headline">¶</a></h2>
<img alt="../../_images/robot_settings.png" class="align-center" src="../../_images/robot_settings.png" />
<span class="target" id="module-reachmaster.settings.robot_settings"></span><p>The robot settings window is opened as a child of the
ReachMaster root application. It allows the user to set any
parameters located on the robot microcontroller (e.g.,
position smoothing, valve periods etc.), or having to do
with the robot kinematics. It provides options for the user
to select previously generated calibration and position
command files. Soon it will allow users to run a robot
calibration from within the ReachMaster application.</p>
<div class="admonition-todo admonition" id="id5">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>Add labels to specify the microcontroller/kinematics parameters</p></li>
<li><p>Run calibration callback</p></li>
<li><p>Re-add load calibration callback?</p></li>
<li><p>Automate unit tests</p></li>
<li><p>PEP 8</p></li>
</ul>
</div>
<dl class="class">
<dt id="reachmaster.settings.robot_settings.RobotSettings">
<em class="property">class </em><code class="sig-prename descclassname">reachmaster.settings.robot_settings.</code><code class="sig-name descname">RobotSettings</code><span class="sig-paren">(</span><em class="sig-param">parent</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/robot_settings.html#RobotSettings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>The primary class for the robot settings window.</p>
<p>Configures and provides window callback methods. Also provides
methods to . The
<cite>on_quit()</cite> method is called prior to application destruction.</p>
<dl class="attribute">
<dt id="reachmaster.settings.robot_settings.RobotSettings.config">
<code class="sig-name descname">config</code><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.config" title="Permalink to this definition">¶</a></dt>
<dd><p>The current configuration settings for the application</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.robot_settings.RobotSettings.pos_smoothing">
<code class="sig-name descname">pos_smoothing</code><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.pos_smoothing" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected position
smoothing parameter (0-1, 0 less smoothing).</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.robot_settings.RobotSettings.tol">
<code class="sig-name descname">tol</code><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.tol" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected tolerance
(bits) for accepting robot convergence to the command
position. (i.e., the L2-norm of the potentiometer readings
must be less than tol).</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.robot_settings.RobotSettings.period">
<code class="sig-name descname">period</code><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.period" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected valve
period (us). Equivalent to pulse width modulation (PWM)
period.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.robot_settings.RobotSettings.off_dur">
<code class="sig-name descname">off_dur</code><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.off_dur" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected minimum
off duration (ms) that is enforced between convergence
times. Once the robot converges to a command position, it
will not move to a new command position for this duration.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.robot_settings.RobotSettings.num_tol">
<code class="sig-name descname">num_tol</code><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.num_tol" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected number of
consecutive periods the robot must be within convergence in
order to be considered “in position”.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">(x/y/z)_(push/pull)_wt</code></dt>
<dd><p>Tkinter StringVar that captures the user-selected weighting
coefficient placed on the <cite>x/y/z</cite> actuator in the
<cite>push/pull</cite> direction. Acts as a gain on the calibration
coefficients. Typically defaults to 1 for a good
calibration, but gives the user an option to make quick
manual adjustments without runnning an entirely new
calibration. Not used very often in practice.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.robot_settings.RobotSettings.rew_zone_x">
<code class="sig-name descname">rew_zone_x</code><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.rew_zone_x" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected minimum
<cite>x</cite> position (bits) the handle must cross in order to enter
the reward zone.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.robot_settings.RobotSettings.rew_zone_">
<code class="sig-name descname">rew_zone_</code><span class="sig-paren">(</span><em class="sig-param">y/z)_(min/max</em><span class="sig-paren">)</span><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.rew_zone_" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected min/max
<cite>x/z</cite> positions (bits) the handle must be within in order to
be located in the reward zone. Conditions must be satisfied
on all actuators simultaneously.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.robot_settings.RobotSettings.calibration_file">
<code class="sig-name descname">calibration_file</code><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.calibration_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected robot
calibration file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.robot_settings.RobotSettings.command_file">
<code class="sig-name descname">command_file</code><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.command_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected position
command file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.robot_settings.RobotSettings.command_type">
<code class="sig-name descname">command_type</code><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.command_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-selected option
determining how commands are generated. Can be
‘read_from_file’, ‘sample_from_file’, or ‘parametric_sample’.
‘read_from_file’ takes the commands directly from the command
file. ‘sample_from_file’ generates a sequence of commands by
sampling from the command file with replacement.
‘parametric_sample’ does not use the command file. Rather, it
samples commands uniformly from the <cite>reach volume</cite> determined
by user-selected inverse kinematics parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">(y/z)gimbal_to_joint</code></dt>
<dd><p>Tkinter StringVar that captures the user-measured
center-to-center distance (mm) from an y/z gimbal to its
respective spherical joint (link to hardware page).</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">(x/y/z)gimbal_(x/y/z)offset</code></dt>
<dd><p>Tkinter StringVar that captures the user-measured offset (mm)
of the (x/y/z) gimbal from the origin in the (x/y/z)
direction.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">(x/y/z)_origin</code></dt>
<dd><p>Tkinter StringVar that captures the user-measured (x/y/z)
position (bits) of the origin.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.robot_settings.RobotSettings.reach_dist_">
<code class="sig-name descname">reach_dist_</code><span class="sig-paren">(</span><em class="sig-param">min/max</em><span class="sig-paren">)</span><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.reach_dist_" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-specified (min/max)
reach distance of the <cite>reach volume</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.settings.robot_settings.RobotSettings.reach_angle_max">
<code class="sig-name descname">reach_angle_max</code><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.reach_angle_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Tkinter StringVar that captures the user-specified max reach
angle (rad) of the <cite>reach volume</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>instance</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.robot_settings.RobotSettings.calibration_browse_callback">
<code class="sig-name descname">calibration_browse_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/robot_settings.html#RobotSettings.calibration_browse_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.calibration_browse_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows the user to select a calibration file to be loaded to the
robot microcontroller.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.robot_settings.RobotSettings.command_browse_callback">
<code class="sig-name descname">command_browse_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/robot_settings.html#RobotSettings.command_browse_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.command_browse_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows the user to select a position command file to be loaded
to the robot microcontroller.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.robot_settings.RobotSettings.on_quit">
<code class="sig-name descname">on_quit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/robot_settings.html#RobotSettings.on_quit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.on_quit" title="Permalink to this definition">¶</a></dt>
<dd><p>Called prior to destruction of the robot settings window.</p>
<p>Prior to destruction, the configuration file must be updated
to reflect the change in settings.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.settings.robot_settings.RobotSettings.run_calibration_callback">
<code class="sig-name descname">run_calibration_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/settings/robot_settings.html#RobotSettings.run_calibration_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.settings.robot_settings.RobotSettings.run_calibration_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Not yet implented. Should load the robot calibration script to
the robot microcontroller along with any relevant arguments, and
run the calibration.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="protocols">
<h2>Protocols<a class="headerlink" href="#protocols" title="Permalink to this headline">¶</a></h2>
<img alt="../../_images/protocol_window.png" class="align-center" src="../../_images/protocol_window.png" />
<span class="target" id="module-reachmaster.protocols"></span><p>The protocol window is opened as a child of the
ReachMaster root application whenever a protocol is run. It
provides basic functionality for interacting with the rig
while an experiment is running (e.g., for manual reward
delivery, toggling lights, etc.).</p>
<div class="admonition-todo admonition" id="id6">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>Keep adding new protocol types</p></li>
<li><p>GPU-accelerated video encoding</p></li>
<li><p>Automate unit tests</p></li>
<li><p>PEP 8</p></li>
</ul>
</div>
<dl class="class">
<dt id="reachmaster.protocols.Protocols">
<em class="property">class </em><code class="sig-prename descclassname">reachmaster.protocols.</code><code class="sig-name descname">Protocols</code><span class="sig-paren">(</span><em class="sig-param">parent</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/protocols.html#Protocols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.protocols.Protocols" title="Permalink to this definition">¶</a></dt>
<dd><p>The primary class for the protocol window.</p>
<p>Configures and provides window callback methods. Also provides
special <cite>run</cite> methods that implement each of the protocol types.
Protocol types also has special <cite>on_quit()</cite> methods that are
called prior to application destruction.</p>
<dl class="attribute">
<dt id="reachmaster.protocols.Protocols.config">
<code class="sig-name descname">config</code><a class="headerlink" href="#reachmaster.protocols.Protocols.config" title="Permalink to this definition">¶</a></dt>
<dd><p>The current configuration settings for the application.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.protocols.Protocols.output_params">
<code class="sig-name descname">output_params</code><a class="headerlink" href="#reachmaster.protocols.Protocols.output_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Video encoding parameters for WriteGear.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.protocols.Protocols.exp_connected">
<code class="sig-name descname">exp_connected</code><a class="headerlink" href="#reachmaster.protocols.Protocols.exp_connected" title="Permalink to this definition">¶</a></dt>
<dd><p>True when experiment controller interface is activated.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.protocols.Protocols.rob_connected">
<code class="sig-name descname">rob_connected</code><a class="headerlink" href="#reachmaster.protocols.Protocols.rob_connected" title="Permalink to this definition">¶</a></dt>
<dd><p>True when robot controller interface is activated.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.protocols.Protocols.cams_connected">
<code class="sig-name descname">cams_connected</code><a class="headerlink" href="#reachmaster.protocols.Protocols.cams_connected" title="Permalink to this definition">¶</a></dt>
<dd><p>True when camera interface is activated.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.protocols.Protocols.video_open">
<code class="sig-name descname">video_open</code><a class="headerlink" href="#reachmaster.protocols.Protocols.video_open" title="Permalink to this definition">¶</a></dt>
<dd><p>True when a file is open for video encoding.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.protocols.Protocols.poi_means">
<code class="sig-name descname">poi_means</code><a class="headerlink" href="#reachmaster.protocols.Protocols.poi_means" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of the mean value of each pixel-of-interest for
each camera as measured from the baseline acquisition
period. Used for reach detection.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.protocols.Protocols.poi_stds">
<code class="sig-name descname">poi_stds</code><a class="headerlink" href="#reachmaster.protocols.Protocols.poi_stds" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of standard deviations for each pixel-of-interest
for each camera as measured from the baseline acquisition
period. Used for reach detection.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.protocols.Protocols.poi_obs">
<code class="sig-name descname">poi_obs</code><a class="headerlink" href="#reachmaster.protocols.Protocols.poi_obs" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of all pixel-of-interest values from the most
recently captured group of images. Used for reach detection.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.protocols.Protocols.poi_zscores">
<code class="sig-name descname">poi_zscores</code><a class="headerlink" href="#reachmaster.protocols.Protocols.poi_zscores" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of all pixel-of-interest zscores relative to baseline
for the most recently captured group of images. Used for
reach detection.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.protocols.Protocols.lights_on">
<code class="sig-name descname">lights_on</code><a class="headerlink" href="#reachmaster.protocols.Protocols.lights_on" title="Permalink to this definition">¶</a></dt>
<dd><p>True if neopixel lights are on.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.protocols.Protocols.buffer_full">
<code class="sig-name descname">buffer_full</code><a class="headerlink" href="#reachmaster.protocols.Protocols.buffer_full" title="Permalink to this definition">¶</a></dt>
<dd><p>True if video buffer is full when <cite>protocol type</cite> is ‘TRIALS’</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.protocols.Protocols.reach_detected">
<code class="sig-name descname">reach_detected</code><a class="headerlink" href="#reachmaster.protocols.Protocols.reach_detected" title="Permalink to this definition">¶</a></dt>
<dd><p>True when poi_zscores from all cameras are above the
user-specified threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.protocols.Protocols.control_message">
<code class="sig-name descname">control_message</code><a class="headerlink" href="#reachmaster.protocols.Protocols.control_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Character message that is sent to the experiment controller
according to the communication protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>char</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="reachmaster.protocols.Protocols.exp_response">
<code class="sig-name descname">exp_response</code><a class="headerlink" href="#reachmaster.protocols.Protocols.exp_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Character received in response to the control_message from
the experiment controller interpreted according to the
communication protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>char</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="reachmaster.protocols.Protocols.deliver_water_callback">
<code class="sig-name descname">deliver_water_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/protocols.html#Protocols.deliver_water_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.protocols.Protocols.deliver_water_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens the reward solenoid for the reward duration set
in experiment settings.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.protocols.Protocols.move_robot_callback">
<code class="sig-name descname">move_robot_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/protocols.html#Protocols.move_robot_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.protocols.Protocols.move_robot_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Commands the robot to move to the next position in
its currently loaded command sequence.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.protocols.Protocols.on_quit">
<code class="sig-name descname">on_quit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/protocols.html#Protocols.on_quit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.protocols.Protocols.on_quit" title="Permalink to this definition">¶</a></dt>
<dd><p>Called prior to destruction protocol window.</p>
<p>Prior to destruction, all interfaces must be stopped and
protocol-specific cleanup needs to take place.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.protocols.Protocols.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/protocols.html#Protocols.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.protocols.Protocols.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a single iteration of the selected protocol type.</p>
<p>The currently supported protocol types are TRIALS and
CONTINUOUS. In order to add a custom type, developers must
write a <cite>run_newtype()</cite> method and add it to the call
search here. The run methods for each protocol type are
where all the vital real-time operations are executed.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.protocols.Protocols.run_continuous">
<code class="sig-name descname">run_continuous</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/protocols.html#Protocols.run_continuous"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.protocols.Protocols.run_continuous" title="Permalink to this definition">¶</a></dt>
<dd><p>Operations performed for a single iteration of protocol type CONTINOUS.</p>
<p>If an image is triggered by the experiment controller, reach detection is
performed on the images, the images are concatenated, and encoded to mp4
continuously, even during intertrial intervals, in real-time. Consequently,
for this protocol type, the lights remain on during the intertrial interval.
Messages are sent to the experiment controller to signal important events
such as reach detections, beginnings/ends of trials, and to initiate robot
movement. Responses are read from the experiment controller and saved to
the data output file.</p>
<div class="admonition-todo admonition" id="id7">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>Functionalize code chunks so logic is clearer and custom protocol types are easier to implement.</p></li>
<li><p>Absorb communication codes into experiment interface module</p></li>
</ul>
</div>
</dd></dl>

<dl class="method">
<dt id="reachmaster.protocols.Protocols.run_trials">
<code class="sig-name descname">run_trials</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/protocols.html#Protocols.run_trials"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.protocols.Protocols.run_trials" title="Permalink to this definition">¶</a></dt>
<dd><p>Operations performed for a single iteration of protocol type TRIALS.</p>
<p>If an image is triggered by the experiment controller, reach detection is
performed on the images, the images are added/removed to an online buffer,
and encoded to mp4 during the intertrial intertval. For this protocol
type, the lights are turned off during the intertrial interval. Messages
are sent to the experiment controller to signal important events such as
reach detections, beginnings/ends of trials, and to initiate robot
movement. Responses are read from the experiment controller and saved to
the data output file.</p>
<div class="admonition-todo admonition" id="id8">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>Functionalize code chunks so logic is clearer and custom protocol types are easier to implement.</p></li>
<li><p>Absorb communication codes into experiment interface module</p></li>
</ul>
</div>
</dd></dl>

<dl class="method">
<dt id="reachmaster.protocols.Protocols.toggle_led_callback">
<code class="sig-name descname">toggle_led_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/protocols.html#Protocols.toggle_led_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.protocols.Protocols.toggle_led_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Toggles the LED located on the robot handle.</p>
</dd></dl>

<dl class="method">
<dt id="reachmaster.protocols.Protocols.toggle_lights_callback">
<code class="sig-name descname">toggle_lights_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/protocols.html#Protocols.toggle_lights_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.protocols.Protocols.toggle_lights_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Toggles the neopixel lights.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-reachmaster.interfaces.camera_interface">
<span id="camera-interface"></span><h2>Camera Interface<a class="headerlink" href="#module-reachmaster.interfaces.camera_interface" title="Permalink to this headline">¶</a></h2>
<p>This module provides a set of functions for interfacing
with multiple Ximea machine vision USB3.0 cameras via the
Ximea API. It provides functions start/stop the cameras
using the user-selected settings, and to get images from
the cameras.</p>
<div class="admonition-todo admonition" id="id9">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>Object orient</p></li>
<li><p>GPU-accelerated video encoding</p></li>
<li><p>Automate unit tests</p></li>
<li><p>PEP 8</p></li>
</ul>
</div>
<dl class="function">
<dt id="reachmaster.interfaces.camera_interface.get_npimage">
<code class="sig-prename descclassname">reachmaster.interfaces.camera_interface.</code><code class="sig-name descname">get_npimage</code><span class="sig-paren">(</span><em class="sig-param">cam</em>, <em class="sig-param">img</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/camera_interface.html#get_npimage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.camera_interface.get_npimage" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the most recent image from a camera as a numpy
array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cam</strong> (<em>ximea.xiapi.Camera</em>) – A ximea api Camera object.</p></li>
<li><p><strong>img</strong> (<em>ximea.xiapi.Image</em>) – A ximea api Image container object</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>npimg</strong> – The most recently acquired image from the camera
as a numpy array.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.camera_interface.init_image">
<code class="sig-prename descclassname">reachmaster.interfaces.camera_interface.</code><code class="sig-name descname">init_image</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/camera_interface.html#init_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.camera_interface.init_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a ximea container object to store images.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>img</strong> – A ximea api Image container object</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ximea.xiapi.Image</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.camera_interface.start_interface">
<code class="sig-prename descclassname">reachmaster.interfaces.camera_interface.</code><code class="sig-name descname">start_interface</code><span class="sig-paren">(</span><em class="sig-param">config</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/camera_interface.html#start_interface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.camera_interface.start_interface" title="Permalink to this definition">¶</a></dt>
<dd><p>Open all cameras, loads user-selected settings, and
starts image acquisition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> (<em>dict</em>) – The currently loaded configuration file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>cams</strong> – A list of ximea api Camera objects.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.camera_interface.stop_interface">
<code class="sig-prename descclassname">reachmaster.interfaces.camera_interface.</code><code class="sig-name descname">stop_interface</code><span class="sig-paren">(</span><em class="sig-param">cams</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/camera_interface.html#stop_interface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.camera_interface.stop_interface" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop image acquisition and close all cameras.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cams</strong> (<em>list</em>) – A list of ximea api Camera objects.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-reachmaster.interfaces.experiment_interface">
<span id="experiment-interface"></span><h2>Experiment Interface<a class="headerlink" href="#module-reachmaster.interfaces.experiment_interface" title="Permalink to this headline">¶</a></h2>
<p>This module provides a set of functions for interfacing
with the experiment microcontroller. It provides functions
to recognize and establish serial connections to the
controller, read/write settings, exectute common callbacks,
and read/write custom messages.</p>
<div class="admonition-todo admonition" id="id10">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>Object orient</p></li>
<li><p>Automate unit tests</p></li>
<li><p>PEP 8</p></li>
</ul>
</div>
<dl class="function">
<dt id="reachmaster.interfaces.experiment_interface.deliver_water">
<code class="sig-prename descclassname">reachmaster.interfaces.experiment_interface.</code><code class="sig-name descname">deliver_water</code><span class="sig-paren">(</span><em class="sig-param">exp_controller</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/experiment_interface.html#deliver_water"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.experiment_interface.deliver_water" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a message to experiment controller to open the
reward solenoid for the user-selected duration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exp_controller</strong> (<em>serial.serialposix.Serial</em>) – The serial interface to the experiment controller.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.experiment_interface.flush_water">
<code class="sig-prename descclassname">reachmaster.interfaces.experiment_interface.</code><code class="sig-name descname">flush_water</code><span class="sig-paren">(</span><em class="sig-param">exp_controller</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/experiment_interface.html#flush_water"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.experiment_interface.flush_water" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a message to experiment controller to opens the
reward solenoid for the flush user-selected flush
duration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exp_controller</strong> (<em>serial.serialposix.Serial</em>) – The serial interface to the experiment controller.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.experiment_interface.get_ports">
<code class="sig-prename descclassname">reachmaster.interfaces.experiment_interface.</code><code class="sig-name descname">get_ports</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/experiment_interface.html#get_ports"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.experiment_interface.get_ports" title="Permalink to this definition">¶</a></dt>
<dd><p>List all serial port with connected devices.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>port_list</strong> – Names of all the serial ports with connected devices.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.experiment_interface.move_robot">
<code class="sig-prename descclassname">reachmaster.interfaces.experiment_interface.</code><code class="sig-name descname">move_robot</code><span class="sig-paren">(</span><em class="sig-param">exp_controller</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/experiment_interface.html#move_robot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.experiment_interface.move_robot" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a message to experiment controller to command the
robot to move to the next position in its command
sequence.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exp_controller</strong> (<em>serial.serialposix.Serial</em>) – The serial interface to the experiment controller.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.experiment_interface.read_response">
<code class="sig-prename descclassname">reachmaster.interfaces.experiment_interface.</code><code class="sig-name descname">read_response</code><span class="sig-paren">(</span><em class="sig-param">exp_controller</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/experiment_interface.html#read_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.experiment_interface.read_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a line of data from the experiment controller
in response to the most recently written message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exp_controller</strong> (<em>serial.serialposix.Serial</em>) – The serial interface to the experiment controller.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>response</strong> – The line of data received from the experiment
controller in response to the most recently
written message.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.experiment_interface.set_exp_controller">
<code class="sig-prename descclassname">reachmaster.interfaces.experiment_interface.</code><code class="sig-name descname">set_exp_controller</code><span class="sig-paren">(</span><em class="sig-param">exp_controller</em>, <em class="sig-param">config</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/experiment_interface.html#set_exp_controller"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.experiment_interface.set_exp_controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the experiment settings to the experiment controller.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exp_controller</strong> (<em>serial.serialposix.Serial</em>) – The serial interface to the experiment controller.</p></li>
<li><p><strong>config</strong> (<em>dict</em>) – The currently loaded configuration file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.experiment_interface.start_experiment">
<code class="sig-prename descclassname">reachmaster.interfaces.experiment_interface.</code><code class="sig-name descname">start_experiment</code><span class="sig-paren">(</span><em class="sig-param">exp_controller</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/experiment_interface.html#start_experiment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.experiment_interface.start_experiment" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a message to experiment controller to begin
executing an experiment protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exp_controller</strong> (<em>serial.serialposix.Serial</em>) – The serial interface to the experiment controller.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>response</strong> – The first line of data received from the
experiment controller verifying that the protocol
has been initiated.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.experiment_interface.start_interface">
<code class="sig-prename descclassname">reachmaster.interfaces.experiment_interface.</code><code class="sig-name descname">start_interface</code><span class="sig-paren">(</span><em class="sig-param">config</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/experiment_interface.html#start_interface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.experiment_interface.start_interface" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish a serial connection with the experiment
controller.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> (<em>dict</em>) – The currently loaded configuration file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>exp_controller</strong> – The serial interface to the experiment controller.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>serial.serialposix.Serial</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.experiment_interface.stop_interface">
<code class="sig-prename descclassname">reachmaster.interfaces.experiment_interface.</code><code class="sig-name descname">stop_interface</code><span class="sig-paren">(</span><em class="sig-param">exp_controller</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/experiment_interface.html#stop_interface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.experiment_interface.stop_interface" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a soft reboot of the experiment controller
and close the serial connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exp_controller</strong> (<em>serial.serialposix.Serial</em>) – The serial interface to the experiment controller.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.experiment_interface.toggle_led">
<code class="sig-prename descclassname">reachmaster.interfaces.experiment_interface.</code><code class="sig-name descname">toggle_led</code><span class="sig-paren">(</span><em class="sig-param">exp_controller</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/experiment_interface.html#toggle_led"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.experiment_interface.toggle_led" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a message to experiment controller to toggle the
LED located on the robot handle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exp_controller</strong> (<em>serial.serialposix.Serial</em>) – The serial interface to the experiment controller.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.experiment_interface.toggle_lights">
<code class="sig-prename descclassname">reachmaster.interfaces.experiment_interface.</code><code class="sig-name descname">toggle_lights</code><span class="sig-paren">(</span><em class="sig-param">exp_controller</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/experiment_interface.html#toggle_lights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.experiment_interface.toggle_lights" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a message to experiment controller to toggle the
neopixel lights.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exp_controller</strong> (<em>serial.serialposix.Serial</em>) – The serial interface to the experiment controller.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.experiment_interface.trigger_image">
<code class="sig-prename descclassname">reachmaster.interfaces.experiment_interface.</code><code class="sig-name descname">trigger_image</code><span class="sig-paren">(</span><em class="sig-param">exp_controller</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/experiment_interface.html#trigger_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.experiment_interface.trigger_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a message to experiment controller to trigger the
cameras to capture an image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exp_controller</strong> (<em>serial.serialposix.Serial</em>) – The serial interface to the experiment controller.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.experiment_interface.write_message">
<code class="sig-prename descclassname">reachmaster.interfaces.experiment_interface.</code><code class="sig-name descname">write_message</code><span class="sig-paren">(</span><em class="sig-param">exp_controller</em>, <em class="sig-param">message</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/experiment_interface.html#write_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.experiment_interface.write_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a line of data from the experiment controller
in response to the most recently written message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exp_controller</strong> (<em>serial.serialposix.Serial</em>) – The serial interface to the experiment controller.</p></li>
<li><p><strong>message</strong> (<em>str</em>) – A string that is recognizeable by the experiment
controller.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-reachmaster.interfaces.robot_interface">
<span id="robot-interface"></span><h2>Robot Interface<a class="headerlink" href="#module-reachmaster.interfaces.robot_interface" title="Permalink to this headline">¶</a></h2>
<p>Module that provides a set of functions for interfacing
with the robot microcontroller. It provides functions to
recognize and establish serial connections to the
controller, read/write settings, calibration and command
files.</p>
<div class="admonition-todo admonition" id="id11">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>Object orient</p></li>
<li><p>Automate unit tests</p></li>
<li><p>PEP 8</p></li>
</ul>
</div>
<dl class="function">
<dt id="reachmaster.interfaces.robot_interface.get_ports">
<code class="sig-prename descclassname">reachmaster.interfaces.robot_interface.</code><code class="sig-name descname">get_ports</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/robot_interface.html#get_ports"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.robot_interface.get_ports" title="Permalink to this definition">¶</a></dt>
<dd><p>List all serial port with connected devices.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>port_list</strong> – Names of all the serial ports with connected devices.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.robot_interface.load_config_calibration">
<code class="sig-prename descclassname">reachmaster.interfaces.robot_interface.</code><code class="sig-name descname">load_config_calibration</code><span class="sig-paren">(</span><em class="sig-param">rob_controller</em>, <em class="sig-param">config</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/robot_interface.html#load_config_calibration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.robot_interface.load_config_calibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the calibration parameters to the robot controller.</p>
<p>Uses the calibration file selected in the configuration
file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rob_controller</strong> (<em>serial.serialposix.Serial</em>) – The serial interface to the robot controller.</p></li>
<li><p><strong>config</strong> (<em>dict</em>) – The currently loaded configuration file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.robot_interface.load_config_commands">
<code class="sig-prename descclassname">reachmaster.interfaces.robot_interface.</code><code class="sig-name descname">load_config_commands</code><span class="sig-paren">(</span><em class="sig-param">rob_controller</em>, <em class="sig-param">config</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/robot_interface.html#load_config_commands"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.robot_interface.load_config_commands" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the position commands to the robot controller.</p>
<p>Uses the method determined by the command type
selected in the configuration file. Currently, the
options are <cite>read_from_file</cite>, <cite>sample_from_file</cite>, or
<cite>parametric_sample</cite>. <cite>read_from_file</cite> takes the
commands directly from the command file.
<cite>sample_from_file</cite> generates a sequence of commands by
sampling rows from the command file with replacement.
For both of these options, the command file is assumed
to have three columns ordered as <cite>reach distance</cite>,
<cite>azimuth’, `elevation</cite>. <cite>parametric_sample</cite> does not
use the command file. Rather, it samples commands
uniformly from the <cite>reach volume</cite> determined by the
user-selected inverse kinematics parameters.</p>
<div class="admonition-todo admonition" id="id12">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>Further functionalize for better clarity.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rob_controller</strong> (<em>serial.serialposix.Serial</em>) – The serial interface to the robot controller.</p></li>
<li><p><strong>config</strong> (<em>dict</em>) – The currently loaded configuration file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>config</strong> – The configuration file possibly updated to include
the command values that were loaded.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.robot_interface.set_rob_controller">
<code class="sig-prename descclassname">reachmaster.interfaces.robot_interface.</code><code class="sig-name descname">set_rob_controller</code><span class="sig-paren">(</span><em class="sig-param">rob_controller</em>, <em class="sig-param">config</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/robot_interface.html#set_rob_controller"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.robot_interface.set_rob_controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Load all the robot settings to the robot controller.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rob_controller</strong> (<em>serial.serialposix.Serial</em>) – The serial interface to the robot controller.</p></li>
<li><p><strong>config</strong> (<em>dict</em>) – The currently loaded configuration file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>config</strong> – The configuration file possibly updated to include
the command values that were loaded.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.robot_interface.start_interface">
<code class="sig-prename descclassname">reachmaster.interfaces.robot_interface.</code><code class="sig-name descname">start_interface</code><span class="sig-paren">(</span><em class="sig-param">config</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/robot_interface.html#start_interface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.robot_interface.start_interface" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish a serial connection with the robot
controller.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> (<em>dict</em>) – The currently loaded configuration file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rob_controller</strong> – The serial interface to the robot controller.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>serial.serialposix.Serial</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.interfaces.robot_interface.stop_interface">
<code class="sig-prename descclassname">reachmaster.interfaces.robot_interface.</code><code class="sig-name descname">stop_interface</code><span class="sig-paren">(</span><em class="sig-param">rob_controller</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/interfaces/robot_interface.html#stop_interface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.interfaces.robot_interface.stop_interface" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a soft reboot of the robot controller
and close the serial connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rob_controller</strong> (<em>serial.serialposix.Serial</em>) – The serial interface to the robot controller.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-reachmaster.config">
<span id="configuration-files"></span><h2>Configuration Files<a class="headerlink" href="#module-reachmaster.config" title="Permalink to this headline">¶</a></h2>
<p>Module for working with configuration files.</p>
<p>Configurations files are json files that store all the settings
used in a ReachMaster session. Functions are provided to
generate default configuration files, as well as to save and
load previous configurations. This encourages persistence of
settings across experiments.</p>
<dl class="function">
<dt id="reachmaster.config.default_config">
<code class="sig-prename descclassname">reachmaster.config.</code><code class="sig-name descname">default_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/config.html#default_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.config.default_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a configuration populated with sensible defaults.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A default configuration.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.config.save_config">
<code class="sig-prename descclassname">reachmaster.config.</code><code class="sig-name descname">save_config</code><span class="sig-paren">(</span><em class="sig-param">config</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/config.html#save_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.config.save_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a configuration file.</p>
<p>This is typically called upon closing application if the
user responds yes to the save prompt. The configuration is
given the current datetime as a name and saved to a json
in the config folder of the user-selected data output
directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> (<em>dict</em>) – The currently loaded configuration.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.config.load_config">
<code class="sig-prename descclassname">reachmaster.config.</code><code class="sig-name descname">load_config</code><span class="sig-paren">(</span><em class="sig-param">file_handle</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/config.html#load_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.config.load_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a configuration file.</p>
<p>File typically selected by user from the configuration
browser in the root ReachMaster application window.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_handle</strong> (<em>file</em>) – An open, previously saved json configuration file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A default configuration.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="reachmaster.config.save_tmp">
<code class="sig-prename descclassname">reachmaster.config.</code><code class="sig-name descname">save_tmp</code><span class="sig-paren">(</span><em class="sig-param">config</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/reachmaster/config.html#save_tmp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#reachmaster.config.save_tmp" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the configuration to a temp file.</p>
<p>The global state of ReachMaster is tracked with a temp
file. Whenever a child window of the main application is
created or destroyed, the temp file is updated to reflect
whatever changes in settings may have occurred. If the
user forgets to save the configuration file at the end of
a session, the temp file can be used as a backup. It is
saved to the temp folder in the ReachMaster root directory.
<strong>Warning: temp file is reset to defaults as a new session
is started!</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> (<em>dict</em>) – The currently loaded configuration.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../image_preprocessing/image_preprocessing.html" class="btn btn-neutral float-right" title="Image Preprocessing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../software.html" class="btn btn-neutral float-left" title="Software" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The Regents of the University of California, through Lawrence Berkeley National Laboratory

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>